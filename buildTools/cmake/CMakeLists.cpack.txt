# Copyright (C) 2010 Ion Torrent Systems, Inc. All Rights Reserved
include(InstallRequiredSystemLibraries)
set(CPACK_GENERATOR "DEB")

configure_file (
    "${PROJECT_SOURCE_DIR}/../buildTools/LICENSE.txt.in"
    "${PROJECT_BINARY_DIR}/LICENSE.txt" @ONLY
)
install(FILES "${PROJECT_BINARY_DIR}/LICENSE.txt" DESTINATION /opt/ion/doc/${CMAKE_PROJECT_NAME})
install(FILES "${PROJECT_BINARY_DIR}/LICENSE.txt" DESTINATION /var/www/licenses RENAME LICENSE-${CMAKE_PROJECT_NAME})

configure_file (
    "${PROJECT_SOURCE_DIR}/README.txt.in"
    "${PROJECT_BINARY_DIR}/README.txt" @ONLY
)
install(FILES "${PROJECT_BINARY_DIR}/README.txt" DESTINATION /opt/ion/doc/${CMAKE_PROJECT_NAME})

set(CPACK_RESOURCE_FILE_LICENSE "${PROJECT_BINARY_DIR}/LICENSE.txt")
set(CPACK_RESOURCE_FILE_README "${PROJECT_BINARY_DIR}/README.txt")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY ${PROJECT_DESCRIPTION})
set(CPACK_PACKAGE_VERSION_MAJOR "${TVC_VERSION_MAJOR}")
set(CPACK_PACKAGE_VERSION_MINOR "${TVC_VERSION_MINOR}")
set(CPACK_PACKAGE_VERSION_PATCH "${TVC_VERSION_RELEASE}")
set(CPACK_PACKAGE_VERSION "${TVC_VERSION_MAJOR}.${TVC_VERSION_MINOR}.${TVC_VERSION_RELEASE}-1")
set(CPACK_PACKAGE_CONTACT "Ion Torrent <torrentdev@iontorrent.com>")
set(CPACK_PACKAGE_VENDOR "Ion Torrent Systems, Inc.")
set(CPACK_DEBIAN_PACKAGE_SECTION "science")
if("${CMAKE_SYSTEM_PROCESSOR}" STREQUAL "x86_64")
    set(ARCH "amd64")
else()
    set(ARCH "${CMAKE_SYSTEM_PROCESSOR}")
endif()
set(CMAKE_SYSTEM_NAME "${CMAKE_SYSTEM_NAME}_${ARCH}")
set(CPACK_PACKAGE_FILE_NAME "${CMAKE_PROJECT_NAME}_${CPACK_PACKAGE_VERSION}_${CMAKE_SYSTEM_NAME}")

set(CPACK_SOURCE_IGNORE_FILES
"/.git/"
"Makefile\\\\.in$"
"/build/"
)
